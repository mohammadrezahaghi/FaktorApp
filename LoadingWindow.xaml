<Window x:Class="FactorApp.UI.LoadingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Loading" Height="400" Width="320"
        WindowStyle="None" ResizeMode="NoResize" AllowsTransparency="True"
        Background="Transparent" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style TargetType="ProgressBar">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Grid x:Name="TemplateRoot">
                            <Border Background="#1A1A1A" CornerRadius="2" Opacity="0.5"/>
                            <Border x:Name="PART_Track" />
                            <Border x:Name="PART_Indicator" CornerRadius="2" HorizontalAlignment="Left">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#00C896" Offset="0"/>
                                        <GradientStop Color="#B9FBC0" Offset="1"/> </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect Color="#00E676" BlurRadius="10" ShadowDepth="0" Opacity="0.6"/>
                                </Border.Effect>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border CornerRadius="30" BorderThickness="0">
        <Border.Background>
            <SolidColorBrush Color="#050505"/>
        </Border.Background>
        
        <Border.Effect>
            <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.7" Color="Black"/>
        </Border.Effect>

        <Grid>
            <Grid.Clip>
                <RectangleGeometry Rect="0,0,320,400" RadiusX="30" RadiusY="30"/>
            </Grid.Clip>

            <Grid.Triggers>
                <EventTrigger RoutedEvent="Window.Loaded">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="AmbientLightScale" Storyboard.TargetProperty="ScaleY"
                                             From="1.0" To="1.2" Duration="0:0:4" AutoReverse="True" RepeatBehavior="Forever"/>
                            <DoubleAnimation Storyboard.TargetName="AmbientLight" Storyboard.TargetProperty="Opacity"
                                             From="0.1" To="0.25" Duration="0:0:4" AutoReverse="True" RepeatBehavior="Forever"/>

                            <DoubleAnimation Storyboard.TargetName="CoreGlowScale" Storyboard.TargetProperty="ScaleX"
                                             From="1.0" To="1.15" Duration="0:0:2" AutoReverse="True" RepeatBehavior="Forever"/>
                            <DoubleAnimation Storyboard.TargetName="CoreGlowScale" Storyboard.TargetProperty="ScaleY"
                                             From="1.0" To="1.15" Duration="0:0:2" AutoReverse="True" RepeatBehavior="Forever"/>
                            <DoubleAnimation Storyboard.TargetName="CoreGlow" Storyboard.TargetProperty="Opacity"
                                             From="0.4" To="0.7" Duration="0:0:2" AutoReverse="True" RepeatBehavior="Forever"/>

                            <DoubleAnimation Storyboard.TargetName="LogoScale" Storyboard.TargetProperty="ScaleX"
                                             From="1.0" To="1.05" Duration="0:0:3" AutoReverse="True" RepeatBehavior="Forever"/>
                            <DoubleAnimation Storyboard.TargetName="LogoScale" Storyboard.TargetProperty="ScaleY"
                                             From="1.0" To="1.05" Duration="0:0:3" AutoReverse="True" RepeatBehavior="Forever"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Grid.Triggers>

            <Ellipse x:Name="AmbientLight" Width="200" Height="500" HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.2" IsHitTestVisible="False">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#00C896" Offset="0"/> <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="80"/> </Ellipse.Effect>
                <Ellipse.RenderTransform>
                    <ScaleTransform x:Name="AmbientLightScale" CenterX="100" CenterY="250"/>
                </Ellipse.RenderTransform>
            </Ellipse>

            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">

                <Grid Width="140" Height="140" Margin="0,0,0,40">
                    
                    <Ellipse x:Name="CoreGlow" Width="90" Height="90" HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.6">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="#00FFAA" Offset="0"/> <GradientStop Color="Transparent" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                        <Ellipse.Effect>
                            <BlurEffect Radius="30"/>
                        </Ellipse.Effect>
                        <Ellipse.RenderTransform>
                            <ScaleTransform x:Name="CoreGlowScale" CenterX="45" CenterY="45"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>

                    <Image Source="WinAppLogo.png" Width="85" Height="85" 
                           RenderOptions.BitmapScalingMode="HighQuality"
                           HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Image.Effect>
                            <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                        </Image.Effect>
                        <Image.RenderTransform>
                            <ScaleTransform x:Name="LogoScale" CenterX="42.5" CenterY="42.5"/>
                        </Image.RenderTransform>
                    </Image>
                </Grid>

                <TextBlock x:Name="TxtStatus" Text="...در حال راه‌اندازی" 
                           Foreground="#F0F0F0" FontFamily="iransans" FontSize="13" FontWeight="Regular"
                           HorizontalAlignment="Center" Margin="0,0,0,15" 
                           FlowDirection="RightToLeft" TextAlignment="Center" Opacity="0.9">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#00C896" BlurRadius="10" ShadowDepth="0" Opacity="0.3"/>
                    </TextBlock.Effect>
                </TextBlock>

                <ProgressBar x:Name="PrgUpdate" Width="180" Height="4" 
                             Minimum="0" Maximum="100" Value="0" 
                             Visibility="Collapsed" Margin="0,0,0,10"/>

                <TextBlock x:Name="TxtPercent" Text="0%" 
                           Foreground="#808080" FontSize="11" FontFamily="Consolas"
                           HorizontalAlignment="Center"
                           Visibility="Collapsed"/>
            </StackPanel>

            <TextBlock x:Name="TxtVersion" Text="v1.0.0" 
                       Foreground="#202020" FontSize="10" FontFamily="Consolas" FontWeight="Bold"
                       VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,15"/>
        </Grid>
    </Border>
</Window>